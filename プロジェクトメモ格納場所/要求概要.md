# プロジェクト要件定義

## システム概要
- WindowsPCが起動しない状態においても、USBブート可能なLinuxOS（Lubuntu）上で、内蔵HDD/SSDからデータを安全かつ効率的にサルベージ（復旧）するためのデスクトップアプリケーションである。
- 開発は日本語で行い、リリース後に必要に応じて英語対応を追加する。
- アプリケーションはPythonで実装し、PysimpleGUIを用いた直感的なユーザーインターフェースを提供する。
- sudo権限を用いて、ディスクのマウントやデータコピーなどのシステム操作を安全に実施する。

## 主なシステム機能
- 【ディスク認識とマウント】:
  - 内蔵HDD/SSDを自動検出し、ユーザーが選択したディスクのマウントを実施する。
  - マウント時にエラーチェックを行い、異常が発生した場合はエラーコードと詳細内容をユーザーに通知する。

- 【ファイルシステム状態チェック】:
  - マウントされたディスク上のファイルシステムの整合性や破損状況を検査し、その結果をユーザーに分かりやすく表示する。

- 【データサルベージ処理】:
  - サルベージ対象は特定のファイルやディレクトリに限定せず、基本的に全てのディレクトリおよびファイル（メール設定ファイル、個人データ等）を対象とする。
  - ユーザーが選択したファイル・ディレクトリを、指定された格納先（例：別のUSBドライブ）にハードコピーする。
  - コピーの進捗状況、エラーハンドリング、完了通知を含む。

- 【GUIの動作】:
  - PysimpleGUIを利用し、直感的かつユーザーフレンドリーなインターフェースを構築する。
  - プログレスバー、ステータスメッセージ、ヘルプ機能、ツールチップを実装する。
  - 初期段階では日本語表示とし、リリース後に英語対応を検討する。

- 【ログ機能】:
  - 操作履歴やエラー情報を詳細なログとして記録し、ログファイルに保存する。
  - エラー時にはエラーコードとエラー内容をユーザーへ通知する。

## 技術的制約および設計方針
- PythonはPEP 8スタイルおよびtype hintを厳守する。
- ユニットテストはpytestを利用し、できるだけ詳細なテストを作成し、カバレッジ80%以上を目標とする。
- GUI実装はPysimpleGUIを利用し、ユーザーにとって分かりやすい操作性を保証する。
- sudo権限によるディスク操作、ファイル操作の安全性、及びシステムリソースの効率的な利用を行う。
- アプリケーションのパッケージングはPyInstallerを使用し、Windows用実行ファイル、Linux用実行ファイル、及びDebianパッケージを生成する。
- プロジェクトはGitHubで管理し、GitHub Actionsを利用した自動ビルドおよびリリースを実施する。

## モジュール構成（例）
- src/main.py:
  - アプリケーションの初期化、GUIウィンドウの設定、イベントループ、sudo権限取得、全体エラーハンドリング
- src/disk_operations/disk_manager.py:
  - 内蔵ディスクの自動検出、マウント・アンマウント、ファイルシステムのチェック、ディスク情報の取得
- src/file_operations/file_handler.py:
  - ファイル・ディレクトリ一覧の取得、ファイルコピー、コピー後の検証、ファイル属性及びアクセス状態の確認、破損ファイルの検出・ハンドリング
- src/gui/main_window.py:
  - GUIレイアウトの構築、プログレスバー、エラーメッセージ、ヘルプ表示、ツールチップの実装、ユーザーイベント処理
- src/utils/logger.py:
  - 操作履歴及びエラー情報のログ記録、ログファイルへの保存及びエクスポート

## 非機能要件
- 【パフォーマンス】:
  - 大容量データのコピー時にも効率的に動作し、システムリソースの無駄を省く。
- 【信頼性】:
  - データコピー中の整合性保持、不測状態（電源断、ディスク異常など）への対応、詳細なエラーハンドリング及びログ記録。
- 【ユーザビリティ】:
  - 誰でも直感的に操作可能なシンプルなGUI、充実したヘルプ機能、明瞭な進捗表示。
- 【セキュリティ】:
  - sudo権限の適切な管理、ファイルアクセス権限の維持、ログ情報の安全な管理。